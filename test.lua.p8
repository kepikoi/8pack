pico-8 cartridge // http://www.pico-8.com
version 8
__lua__
--triangle flight
--by kepikoi

function _init()

    conf = {
        debug = false, --show stats
        tetrominoside = 4, -- size of tetromino cube
        maxCpu = 0.80, --allow add models until max cpu threshold
        maxmodels = 4, --maximal amount of models until cpu threshold,
        pause = false
    }

    poke(0x5f2d, 1) --mouse support

    camera = {
        x = 68,
        y = 9.5,
        z = -25,
        p = 0, --pitch - rotation around x axis
        w = 0, --yaw - rotation around y axis
        r = 0, --roll - rotation around z axis
        f = 40 --focal length of camera
    }

    --temp store for last click
    laststats = {
        cpu = 0
    }

    --Model metatable models store
    models = {}

    --3D Model metatable
    Model = {
        x = 0,
        y = 0,
        z = 0,
        p = 0,
        w = 0,
        r = 0,
        id = rnd(1000),
        colors = { 7, 7 },
        center = { x = 0, y = 0, z = 0 }, --model rotation resolves around models center
        get2d = function(self, parent)
            local _dx = self.x - parent.x - parent.center.x
            local _dy = self.y - parent.y - parent.center.y
            local _dz = self.z - camera.z - parent.center.z

            local _rx = cos(parent.p + camera.p) * _dx - sin(parent.p + camera.p) * _dy
            local _ry = sin(parent.p + camera.p) * _dx + cos(parent.p + camera.p) * _dy
            local _rz = sin(parent.z) * _dz

            local _x = camera.x + (_rx + parent.x) / _rz * camera.f
            local _y = camera.y + (_ry + parent.y) / _rz * camera.f

            return {
                x = _x,
                y = _y
            }
        end
    }
    Model.__index = Model

    --3D Mesh metatable
    Mesh = {
        v = {},
        f = {},
        draw = function(self, parent)
            local _parent = parent
            if parent == nil then
                _parent = {}
                setmetatable(Model, _parent)
            end

            for _f in all(self.f) do --get all faces
                local points = {}
                for i in all(_f) do --get face vertex index
                    self.x = self.v[i][1] + _parent.x
                    self.y = self.v[i][2] + _parent.y
                    self.z = self.v[i][3] + _parent.z

                    --acclerate cubes individually if parent exploded
                    if parent.exploded then
                        self.x = self.x + self.speed.x
                        self.y = self.y + self.speed.y
                        self.z = self.z + self.speed.z
                    end

                    add(points, self:get2d(_parent)) --get cube point in 2d context
                end
                for i = 1, #points do
                    --draw cube from points
                    if (i < #points) then
                        line(points[i].x, points[i].y, points[i + 1].x, points[i + 1].y, _parent.colors[1])
                    else
                        line(points[i].x, points[i].y, points[1].x, points[1].y, _parent.colors[2])
                    end
                end
            end
        end
    }
    Mesh.__index = Mesh
end

--makes & returns random tetromino model
function maketetromino()
    local tetromino = {
        cubes = {},
        id = flr(rnd(1000)),
        x = rnd(30) - 15, --init x coord
        y = rnd(30) - 15, --init y coord
        z = 0, --init z coord
        p = rnd(1), --pitch
        w = 0, --yaw
        r = 0, --roll
        center = {
            x = 0,
            y = 0,
            z = 0
        },
        exploded = false,
        colors = { rnd(8) + 1, rnd(7) + 9 },
        speed = (rnd(4) + 2) / 2000, --rotation & fall speed
        draw = function(self)

            for cube in all(self.cubes) do
                cube:draw(self)

                local pos = self:get2d(self)

                if (conf.debug) then
                    print('id:' .. self.id, pos.x, pos.y - 14, self.colors[1])
                    print('x:' .. self.x, pos.x, pos.y - 7, self.colors[1])
                    print('y:' .. self.y, pos.x, pos.y, self.colors[1])
                    print('z:' .. self.z, pos.x, pos.y + 7, self.colors[1])
                end
            end
        end,
        update = function(self)
            self.y = self.y + self.speed ^ 2
            self.p = self.p + self.speed
            self.z = self.z + self.speed

            if self.z ^ 2 > 0.25 then
                del(models, self)
            end

            if rnd(100) < 1 and not self.exploded then
                self.exploded = true
            end

            for cube in all(self.cubes) do
                cube:update(self)
            end
        end
    }
    setmetatable(tetromino, Model)

    local shapes = {
        { { 0, 0, 0, 1 }, { 1, 0, 0, 1 }, { 2, 0, 0, 1 }, { 2, 1, 0, 1 } }, --L
        { { 0, 1, 0, 1 }, { 0, 0, 0, 1 }, { 1, 0, 0, 1 }, { 2, 0, 0, 1 } }, --J
        { { 0, 0, 0, 1 }, { 1, 0, 0, 1 }, { 2, 0, 0, 1 }, { 1, 1, 0, 1 } }, --T
        { { 1, 1, 0, 1 }, { 1, 0, 0, 1 }, { 2, 0, 0, 1 }, { 2, 1, 0, 1 } }, --O
        { { 0, 0, 0, 1 }, { 1, 0, 0, 1 }, { 2, 0, 0, 1 }, { 3, 0, 0, 1 } }, --I
        { { 0, 0, 0, 1 }, { 1, 0, 0, 1 }, { 1, 1, 0, 1 }, { 2, 1, 0, 1 } }, --Z
        { { 0, 1, 0, 1 }, { 1, 1, 0, 1 }, { 1, 0, 0, 1 }, { 2, 0, 0, 1 } } --S
    }

    --decide on random shape
    local s = shapes[flr(rnd(#shapes)) + 1]
    local centercube = flr(rnd(4) + 1);
    tetromino.center.x = s[centercube][1] + conf.tetrominoside / 2
    tetromino.center.y = s[centercube][2] + conf.tetrominoside / 2
    tetromino.center.z = s[centercube][3] + conf.tetrominoside / 2

    --add shape cubes to model store
    for i = 1, #s do
        local x = s[i][1] * conf.tetrominoside + tetromino.x
        local y = s[i][2] * conf.tetrominoside + tetromino.y
        local z = s[i][3] * conf.tetrominoside + tetromino.z
        local cube = makecube(x, y, z, conf.tetrominoside)
        add(tetromino.cubes, cube)
    end

    return tetromino
end

function makeshuttle()

    local shuttle = {
        v = { { 3.070224, -0.119728, 0.996443 }, { 5.942016, -0.012019, 4.157199 }, { 6.614015, -0.063428, 4.157199 }, { 5.759114, 0.000000, 1.664500 }, { 3.070224, -0.449143, 0.929434 }, { 5.000295, -0.539011, 1.315104 }, { 3.070224, -0.604752, 0.872464 }, { 3.070224, -0.866525, 0.730690 }, { 3.070224, -0.959007, 0.650256 }, { 3.070224, -1.053631, 0.163277 }, { 2.983248, -1.080021, -0.880639 }, { 6.130317, -1.100022, -1.106943 }, { 3.739287, -4.334102, -0.876958 }, { 4.400283, -4.682100, -0.952940 }, { 3.038248, -4.334102, -0.811319 }, { 3.180259, -4.550090, -0.921939 }, { 2.700250, -4.334102, -0.947940 }, { 0.840214, -2.480049, -1.050312 }, { 1.208789, -1.060728, 0.203820 }, { 1.208789, -1.054148, 0.411073 }, { 1.208789, -0.958092, 0.610367 }, { 1.208789, -0.875165, 0.685964 }, { 1.208789, -0.621528, 0.854704 }, { 1.208789, -0.467365, 0.922276 }, { -4.649089, -1.03958, 0.209476 }, { -4.649345, -0.92234, 0.432259 }, { -4.649708, -0.65257, 0.753550 }, { -4.999902, -1.01254, 0.094530 }, { -4.999240, -0.87026, 0.347384 }, { -4.999321, -0.80231, 0.416133 }, { -4.906714, -0.62019, 0.686502 }, { -4.999759, -0.49115, 0.805206 }, { -5.568033, -0.11920, 0.568687 }, { -5.349121, -0.81417, 0.247113 }, { -5.348800, -0.93837, -0.030175 }, { -6.499984, -0.67600, -0.433500 }, { -6.499984, -0.61000, -0.164800 }, { -6.499984, -0.24000, 0.109600 }, { -7.649984, 0.000000, -0.620000 }, { 1.209237, -1.080021, -1.321617 }, { 3.070224, 0.119728, 0.996443 }, { 3.093016, 0.040804, 1.276300 }, { 6.614015, 0.063428, 4.157199 }, { 3.070224, 0.449143, 0.929434 }, { 5.000295, 0.539011, 1.315104 }, { 3.070224, 0.604752, 0.872464 }, { 3.070224, 0.866525, 0.730690 }, { 5.000295, 1.149023, 1.260104 }, { 3.070224, 0.959007, 0.650256 }, { 3.070224, 1.053627, 0.449897 }, { 5.000295, 1.428028, 0.442095 }, { 3.070224, 1.053631, 0.163277 }, { 2.983248, 1.080021, -0.880639 }, { 5.000295, 1.302926, -1.259946 }, { 3.739287, 4.334102, -0.876958 }, { 4.400283, 4.682100, -0.952940 }, { 3.038248, 4.334102, -0.811319 }, { 3.180259, 4.550090, -0.921939 }, { 1.209237, 1.080021, -0.636414 }, { 2.700250, 4.334102, -0.947940 }, { 0.169216, 1.990039, -1.063281 }, { 1.208789, 1.060728, 0.203820 }, { 1.208789, 1.054148, 0.411073 }, { 1.208789, 0.958092, 0.610367 }, { 1.208789, 0.875165, 0.685964 }, { 1.208789, 0.621528, 0.854704 }, { 1.208789, 0.467365, 0.922276 }, { -4.649089, 1.039587, 0.209476 }, { -4.649345, 0.922345, 0.432259 }, { -4.649708, 0.652575, 0.753550 }, { -4.649856, 0.514670, 0.885149 }, { -4.649964, 0.160748, 0.994500 }, { -4.999902, 1.012545, 0.094530 }, { -4.999240, 0.870266, 0.347384 }, { -4.999321, 0.802315, 0.416133 }, { -4.999759, 0.491153, 0.805206 }, { -4.999948, 0.160720, 0.980689 }, { -5.299752, 0.147914, 0.811038 }, { -5.349121, 0.814175, 0.247113 }, { -5.348800, 0.938377, -0.030175 }, { -6.499984, 0.676000, -0.433500 }, { -6.499931, 0.693962, -0.748535 }, { -6.499984, 0.610000, -0.164800 }, { -6.499984, 0.523000, -0.048800 }, { -6.499984, 0.240000, 0.109600 }, { 1.209237, 1.080021, -1.321617 }, { -5.568033, 0.119200, 0.568687 }, { -5.299752, -0.14791, 0.811038 }, { -4.999948, -0.16072, 0.980689 }, { -4.649964, -0.16074, 0.994500 }, { 1.208789, -0.130179, 0.996071 }, { 1.208789, 0.130179, 0.996071 }, { 3.093016, -0.040804, 1.276300 }, { 5.942016, 0.012019, 4.157199 }, { 7.043714, 0.000000, 4.157199 }, { 4.998233, -0.130896, 1.193100 }, { 5.171283, -1.310384, -1.055942 }, { 6.130317, 1.100022, -1.106943 }, { 2.983248, -1.080021, -1.351649 }, { 2.983248, 1.080021, -1.351649 }, { -6.499931, -0.69396, -0.748535 }, { -4.999902, -1.00002, -0.943979 }, { 0.169216, -1.990039, -1.063281 }, { 5.000295, -1.510030, 0.750093 }, { 5.000295, -0.874017, 1.399122 }, { 5.000295, -1.149023, 1.260104 }, { 5.000295, 0.874017, 1.399122 }, { -7.074984, -0.30405, -0.264426 }, { -7.074984, 0.139529, -0.169387 }, { -7.074984, 0.304058, -0.264426 }, { -7.074957, 0.403450, -0.684268 }, { -7.074984, 0.393008, -0.495246 }, { -7.074984, 0.354637, -0.334026 }, { -7.074984, 0.057454, -0.155083 }, { -7.074984, -0.35463, -0.334026 }, { -7.074984, -0.39300, -0.495246 }, { -7.074957, -0.40345, -0.684268 }, { -7.074984, -0.13952, -0.169387 }, { -7.074984, -0.05745, -0.155083 }, { 5.257180, -0.244260, -0.448877 }, { 5.275361, -0.389797, -0.446328 }, { 5.534085, -0.255527, -0.410058 }, { 5.858724, -0.171973, -0.364548 }, { 6.246687, -0.127423, -0.310161 }, { 6.245811, -0.209802, -0.310283 }, { 5.957494, -0.242908, -0.350702 }, { 5.684797, -0.367023, -0.388930 }, { 5.030259, -0.310424, -0.039389 }, { 5.218888, -0.403501, -0.175729 }, { 5.254566, -0.476272, -0.297997 }, { 5.497149, -0.409135, -0.146573 }, { 5.811742, -0.367356, -0.029404 }, { 6.194348, -0.345081, 0.063191 }, { 6.203377, -0.386271, -0.007583 }, { 5.919040, -0.402825, -0.076394 }, { 5.661265, -0.464884, -0.221067 }, { 5.030257, -0.815056, -0.039376 }, { 5.218887, -0.721987, -0.175721 }, { 5.254566, -0.649223, -0.297993 }, { 5.497147, -0.716354, -0.146565 }, { 5.811740, -0.758129, -0.029394 }, { 6.194347, -0.780403, 0.063202 }, { 6.203376, -0.739216, -0.007574 }, { 5.919039, -0.722663, -0.076386 }, { 5.661264, -0.660610, -0.221062 }, { 5.533661, -0.562752, -0.410117 }, { 5.257178, -0.881243, -0.448860 }, { 5.275359, -0.735706, -0.446319 }, { 5.534083, -0.869976, -0.410042 }, { 5.858722, -0.953530, -0.364528 }, { 6.246684, -0.998080, -0.310138 }, { 6.245809, -0.915701, -0.310265 }, { 5.957492, -0.882595, -0.350685 }, { 5.684796, -0.758480, -0.388920 }, { 5.151601, -0.815102, -0.904963 }, { 5.295470, -0.722016, -0.722016 }, { 5.296154, -0.649239, -0.594654 }, { 5.571022, -0.716382, -0.673535 }, { 5.905705, -0.758165, -0.699682 }, { 6.299025, -0.780442, -0.683500 }, { 6.288245, -0.739248, -0.612975 }, { 5.995947, -0.722692, -0.625000 }, { 5.708329, -0.660628, -0.556788 }, { 5.295474, -0.403530, -0.722041 }, { 5.296155, -0.476288, -0.594668 }, { 5.571025, -0.409163, -0.673559 }, { 5.905710, -0.367392, -0.699712 }, { 6.299029, -0.345120, -0.683534 }, { 6.288249, -0.386303, -0.613002 }, { 5.995951, -0.402854, -0.625025 }, { 5.708331, -0.464902, -0.556803 }, { 5.218888, 0.403501, -0.175729 }, { 5.257180, 0.244260, -0.448877 }, { 5.254566, 0.476272, -0.297997 }, { 5.275361, 0.389797, -0.446328 }, { 5.497149, 0.409135, -0.146573 }, { 5.534085, 0.255527, -0.410058 }, { 5.811742, 0.367356, -0.029404 }, { 5.858724, 0.171973, -0.364548 }, { 6.194348, 0.345081, 0.063191 }, { 6.246687, 0.127423, -0.310161 }, { 6.203377, 0.386271, -0.007583 }, { 6.245811, 0.209802, -0.310283 }, { 5.919040, 0.402825, -0.076394 }, { 5.957494, 0.242908, -0.350702 }, { 5.661265, 0.464884, -0.221067 }, { 5.684797, 0.367023, -0.388930 }, { 5.218887, 0.721987, -0.175721 }, { 5.254566, 0.649223, -0.297993 }, { 5.497147, 0.716354, -0.146565 }, { 5.811740, 0.758129, -0.029394 }, { 6.194347, 0.780403, 0.063202 }, { 6.203376, 0.739216, -0.007574 }, { 5.919039, 0.722663, -0.076386 }, { 5.661264, 0.660610, -0.221062 }, { 5.257178, 0.881243, -0.448860 }, { 5.275359, 0.735706, -0.446319 }, { 5.534083, 0.869976, -0.410042 }, { 5.858722, 0.953530, -0.364528 }, { 6.246684, 0.998080, -0.310138 }, { 6.245809, 0.915701, -0.310265 }, { 5.957492, 0.882595, -0.350685 }, { 5.684796, 0.758480, -0.388920 }, { 5.533661, 0.562752, -0.410117 }, { 5.295470, 0.722016, -0.722016 }, { 5.296154, 0.649239, -0.594654 }, { 5.571022, 0.716382, -0.673535 }, { 5.905705, 0.758165, -0.699682 }, { 6.299025, 0.780442, -0.683500 }, { 6.288245, 0.739248, -0.612975 }, { 5.995947, 0.722692, -0.625000 }, { 5.708329, 0.660628, -0.556788 }, { 5.295474, 0.403530, -0.722041 }, { 5.296155, 0.476288, -0.594668 }, { 5.571025, 0.409163, -0.673559 }, { 5.905710, 0.367392, -0.699712 }, { 6.299029, 0.345120, -0.683534 }, { 6.288249, 0.386303, -0.613002 }, { 5.995951, 0.402854, -0.625025 }, { 5.708331, 0.464902, -0.556803 }, { 5.165639, -0.318491, 0.637328 }, { 5.166101, -0.159250, 0.913146 }, { 4.998497, -0.252327, 1.074635 }, { 5.183997, -0.172954, 0.637297 }, { 5.184248, -0.086480, 0.787078 }, { 5.445252, -0.307224, 0.636859 }, { 5.445698, -0.153617, 0.902920 }, { 5.773065, -0.390779, 0.636310 }, { 5.773632, -0.195395, 0.974730 }, { 6.164821, -0.435329, 0.635652 }, { 6.165453, -0.217671, 1.012654 }, { 6.163937, -0.352950, 0.635654 }, { 6.164450, -0.176480, 0.941314 }, { 5.872800, -0.319843, 0.636142 }, { 5.873264, -0.159926, 0.913131 }, { 5.597437, -0.195729, 0.636604 }, { 5.597722, -0.097867, 0.806108 }, { 5.444824, 0.000000, 0.636860 }, { 5.166102, 0.159236, 0.913155 }, { 5.184248, 0.086472, 0.787083 }, { 5.445698, 0.153603, 0.902928 }, { 5.773632, 0.195378, 0.974740 }, { 6.165453, 0.217651, 1.012665 }, { 6.164450, 0.176464, 0.941323 }, { 5.873265, 0.159912, 0.913140 }, { 5.597722, 0.097858, 0.806113 }, { 5.165639, 0.318491, 0.637345 }, { 4.997765, 0.504639, 0.637636 }, { 5.183997, 0.172954, 0.637307 }, { 5.445252, 0.307224, 0.636875 }, { 5.773065, 0.390779, 0.636330 }, { 6.164821, 0.435329, 0.635675 }, { 6.163937, 0.352950, 0.635673 }, { 5.872800, 0.319843, 0.636159 }, { 5.597437, 0.195729, 0.636614 }, { 5.165176, 0.159265, 0.361518 }, { 4.997031, 0.252350, 0.200598 }, { 5.183746, 0.086488, 0.487521 }, { 5.444806, 0.153631, 0.370806 }, { 5.772497, 0.195413, 0.297899 }, { 6.164188, 0.217691, 0.258662 }, { 6.163424, 0.176496, 0.330003 }, { 5.872335, 0.159941, 0.359162 }, { 5.597153, 0.097876, 0.467105 }, { 5.165176, -0.159221, 0.361493 }, { 4.997031, -0.252281, 0.200558 }, { 5.183746, -0.086464, 0.487507 }, { 5.444806, -0.153589, 0.370782 }, { 5.772497, -0.195360, 0.297868 }, { 6.164188, -0.217631, 0.258628 }, { 6.163424, -0.176448, 0.329975 }, { 5.872335, -0.159897, 0.359136 }, { 5.597153, -0.097850, 0.467090 }, { 5.090927, -1.067391, -0.472156 }, { 5.171283, 1.310384, -1.055942 }, { 5.151606, 0.310470, -0.905003 }, { 5.151606, -0.310470, -0.905003 }, { 5.030257, 0.815056, -0.039376 }, { 5.030259, 0.310424, -0.039389 }, { 5.090930, -0.058113, -0.472183 }, { 5.090930, 0.058113, -0.472183 }, { 5.000295, -1.210004, 0.173074 }, { 5.000295, 1.210004, 0.173074 }, { 5.000295, -1.428028, 0.442095 }, { 4.997764, -0.504639, 0.637610 }, { 4.998497, 0.252304, 1.074648 }, { 4.998233, 0.130896, 1.193100 }, { 5.000295, 1.510030, 0.750093 }, { 5.151601, 0.815102, -0.904963 }, { 5.090927, 1.067391, -0.472156 }, { 3.070224, -1.053627, 0.449897 }, { -5.349205, 0.737229, 0.323968 }, { -5.349205, -0.73722, 0.323968 }, { -5.349476, -0.47093, 0.566062 }, { -6.499984, -0.09882, 0.133439 }, { -6.499984, 0.098825, 0.133439 }, { -6.499984, -0.52300, -0.048800 }, { -5.349476, 0.470935, 0.566062 }, { -4.999902, 1.000020, -0.943979 }, { 0.840214, 2.480049, -1.050312 }, { 1.209237, -1.080021, -0.636414 }, { 3.804262, 4.682100, -0.938960 }, { 5.000295, -1.302926, -1.259946 }, { 3.804262, -4.682100, -0.938960 }, { -4.649856, -0.51467, 0.885149 }, { -4.999492, 0.681710, 0.569242 }, { -4.649417, 0.860391, 0.497003 }, { -4.906714, 0.620194, 0.686502 }, { -4.649417, -0.86039, 0.497003 }, { -4.999492, -0.68171, 0.569242 } },
        f = { { 1, 5, 96 }, { 10, 291, 20, 19 }, { 100, 300, 60 }, { 100, 60, 58 }, { 100, 86, 300 }, { 101, 117, 111, 82 }, { 102, 101, 82, 299 }, { 102, 25, 28 }, { 102, 28, 35 }, { 102, 301, 19, 25 }, { 102, 35, 36 }, { 102, 36, 101 }, { 103, 301, 102 }, { 104, 223, 96 }, { 104, 285, 223 }, { 104, 291, 284 }, { 105, 5, 7 }, { 105, 7, 8, 106 }, { 106, 9, 104 }, { 108, 118, 39 }, { 109, 39, 114 }, { 110, 39, 109 }, { 111, 39, 112 }, { 112, 39, 113 }, { 113, 39, 110 }, { 114, 39, 119 }, { 115, 37, 297, 108 }, { 116, 36, 37, 115 }, { 117, 101, 36, 116 }, { 117, 39, 111 }, { 118, 38, 295, 119 }, { 120, 129, 130, 121 }, { 121, 130, 131, 122 }, { 122, 131, 132, 123 }, { 123, 132, 133, 124 }, { 124, 133, 134, 125 }, { 125, 134, 135, 126 }, { 126, 135, 136, 127 }, { 127, 136, 146 }, { 128, 137, 138, 129 }, { 128, 280, 281, 279 }, { 129, 138, 139, 130 }, { 130, 139, 140, 131 }, { 131, 140, 141, 132 }, { 132, 141, 142, 133 }, { 133, 142, 143, 134 }, { 134, 143, 144, 135 }, { 135, 144, 145, 136 }, { 136, 145, 146 }, { 137, 128, 282 }, { 137, 274, 147, 138 }, { 138, 147, 148, 139 }, { 139, 148, 149, 140 }, { 14, 13, 304 }, { 140, 149, 150, 141 }, { 141, 150, 151, 142 }, { 142, 151, 152, 143 }, { 143, 152, 153, 144 }, { 144, 153, 154, 145 }, { 145, 154, 146 }, { 147, 156, 157, 148 }, { 148, 157, 158, 149 }, { 149, 158, 159, 150 }, { 15, 13, 11, 301 }, { 150, 159, 160, 151 }, { 151, 160, 161, 152 }, { 152, 161, 162, 153 }, { 153, 162, 163, 154 }, { 154, 163, 146 }, { 155, 277, 164, 156 }, { 156, 164, 165, 157 }, { 157, 165, 166, 158 }, { 158, 166, 167, 159 }, { 159, 167, 168, 160 }, { 16, 15, 17 }, { 16, 17, 99 }, { 160, 168, 169, 161 }, { 161, 169, 170, 162 }, { 162, 170, 171, 163 }, { 163, 171, 146 }, { 164, 120, 121, 165 }, { 165, 121, 122, 166 }, { 166, 122, 123, 167 }, { 167, 123, 124, 168 }, { 168, 124, 125, 169 }, { 169, 125, 126, 170 }, { 17, 15, 301 }, { 17, 18, 99 }, { 17, 301, 18 }, { 170, 126, 127, 171 }, { 171, 127, 146 }, { 172, 188, 278, 279 }, { 173, 172, 279, 281 }, { 174, 189, 188, 172 }, { 175, 174, 172, 173 }, { 176, 190, 189, 174 }, { 177, 176, 174, 175 }, { 178, 191, 190, 176 }, { 179, 178, 176, 177 }, { 18, 103, 40 }, { 18, 301, 103 }, { 18, 40, 99 }, { 180, 192, 191, 178 }, { 181, 180, 178, 179 }, { 182, 193, 192, 180 }, { 183, 182, 180, 181 }, { 184, 194, 193, 182 }, { 185, 184, 182, 183 }, { 186, 195, 194, 184 }, { 187, 186, 184, 185 }, { 188, 196, 290, 278 }, { 189, 197, 196, 188 }, { 190, 198, 197, 189 }, { 191, 199, 198, 190 }, { 192, 200, 199, 191 }, { 193, 201, 200, 192 }, { 194, 202, 201, 193 }, { 195, 203, 202, 194 }, { 196, 205, 289, 290 }, { 197, 206, 205, 196 }, { 198, 207, 206, 197 }, { 199, 208, 207, 198 }, { 200, 209, 208, 199 }, { 201, 210, 209, 200 }, { 202, 211, 210, 201 }, { 203, 212, 211, 202 }, { 204, 186, 187 }, { 204, 187, 220 }, { 204, 195, 186 }, { 204, 203, 195 }, { 204, 212, 203 }, { 204, 220, 212 }, { 205, 213, 276, 289 }, { 206, 214, 213, 205 }, { 207, 215, 214, 206 }, { 208, 216, 215, 207 }, { 209, 217, 216, 208 }, { 21, 20, 291, 9 }, { 210, 218, 217, 209 }, { 211, 219, 218, 210 }, { 212, 220, 219, 211 }, { 213, 173, 281, 276 }, { 214, 175, 173, 213 }, { 215, 177, 175, 214 }, { 216, 179, 177, 215 }, { 217, 181, 179, 216 }, { 218, 183, 181, 217 }, { 219, 185, 183, 218 }, { 22, 23, 27 }, { 22, 27, 309 }, { 220, 187, 185, 219 }, { 221, 222, 223, 285 }, { 222, 239, 286, 223 }, { 224, 225, 222, 221 }, { 225, 240, 239, 222 }, { 226, 227, 225, 224 }, { 227, 241, 240, 225 }, { 228, 229, 227, 226 }, { 229, 242, 241, 227 }, { 23, 24, 305 }, { 23, 305, 27 }, { 23, 8, 7 }, { 230, 231, 229, 228 }, { 231, 243, 242, 229 }, { 232, 233, 231, 230 }, { 233, 244, 243, 231 }, { 234, 235, 233, 232 }, { 235, 245, 244, 233 }, { 236, 237, 235, 234 }, { 237, 246, 245, 235 }, { 238, 236, 273 }, { 238, 237, 236 }, { 238, 246, 237 }, { 238, 255, 246 }, { 238, 264, 255 }, { 238, 273, 264 }, { 239, 247, 248, 286 }, { 24, 91, 90, 305 }, { 240, 249, 247, 239 }, { 241, 250, 249, 240 }, { 242, 251, 250, 241 }, { 243, 252, 251, 242 }, { 244, 253, 252, 243 }, { 245, 254, 253, 244 }, { 246, 255, 254, 245 }, { 247, 256, 257, 248 }, { 248, 288, 286 }, { 248, 51, 288 }, { 249, 258, 256, 247 }, { 25, 19, 20 }, { 25, 20, 21, 26 }, { 25, 26, 29, 28 }, { 250, 259, 258, 249 }, { 251, 260, 259, 250 }, { 252, 261, 260, 251 }, { 253, 262, 261, 252 }, { 254, 263, 262, 253 }, { 255, 264, 263, 254 }, { 256, 265, 266, 257 }, { 257, 283, 51 }, { 257, 51, 248 }, { 258, 267, 265, 256 }, { 259, 268, 267, 258 }, { 260, 269, 268, 259 }, { 261, 270, 269, 260 }, { 262, 271, 270, 261 }, { 263, 272, 271, 262 }, { 264, 273, 272, 263 }, { 265, 221, 285, 266 }, { 267, 224, 221, 265 }, { 268, 226, 224, 267 }, { 269, 228, 226, 268 }, { 270, 230, 228, 269 }, { 271, 232, 230, 270 }, { 272, 234, 232, 271 }, { 273, 236, 234, 272 }, { 274, 137, 282 }, { 274, 155, 156, 147 }, { 275, 54, 283 }, { 275, 98, 54 }, { 276, 275, 289 }, { 276, 281, 280, 277 }, { 277, 280, 120, 164 }, { 28, 29, 34, 35 }, { 280, 128, 129, 120 }, { 282, 10, 11, 303 }, { 282, 283, 257, 266 }, { 282, 303, 97 }, { 283, 278, 290 }, { 283, 279, 278 }, { 283, 282, 128, 279 }, { 283, 290, 275 }, { 283, 52, 51 }, { 284, 266, 285 }, { 284, 282, 266 }, { 284, 285, 104 }, { 284, 291, 282 }, { 286, 288, 287 }, { 287, 288, 48 }, { 287, 42, 94, 43 }, { 287, 44, 41 }, { 287, 45, 44 }, { 287, 48, 45 }, { 289, 275, 290 }, { 29, 30, 293, 34 }, { 291, 10, 282 }, { 291, 104, 9 }, { 292, 298, 306 }, { 292, 79, 83, 84 }, { 293, 294, 297 }, { 294, 295, 38 }, { 294, 33, 295 }, { 294, 38, 297 }, { 294, 88, 33 }, { 295, 296, 114, 119 }, { 296, 295, 33, 87 }, { 296, 85, 109, 114 }, { 296, 87, 298 }, { 297, 37, 34, 293 }, { 297, 38, 118, 108 }, { 298, 76, 306 }, { 298, 78, 76 }, { 299, 59, 61 }, { 299, 61, 103, 102 }, { 3, 2, 93, 96 }, { 30, 29, 26, 309 }, { 30, 309, 310 }, { 300, 57, 60 }, { 300, 59, 57 }, { 301, 11, 10, 19 }, { 302, 54, 100 }, { 302, 55, 56 }, { 302, 56, 54 }, { 303, 11, 13, 14 }, { 303, 12, 97 }, { 303, 14, 304 }, { 303, 54, 98, 12 }, { 304, 13, 15 }, { 304, 15, 16 }, { 305, 90, 89 }, { 306, 307, 75 }, { 306, 308, 307 }, { 307, 69, 74, 75 }, { 307, 70, 65 }, { 308, 70, 307 }, { 309, 26, 21, 22 }, { 309, 27, 31 }, { 309, 31, 310 }, { 310, 293, 30 }, { 310, 294, 293 }, { 310, 31, 32 }, { 310, 32, 294 }, { 32, 305, 89 }, { 32, 31, 27, 305 }, { 32, 89, 88 }, { 35, 34, 37 }, { 35, 37, 36 }, { 39, 115, 108 }, { 39, 116, 115 }, { 39, 117, 116 }, { 39, 118, 119 }, { 4, 287, 43, 95 }, { 40, 103, 61, 86 }, { 41, 1, 93, 42 }, { 41, 42, 287 }, { 42, 93, 2, 94 }, { 43, 3, 95 }, { 44, 107, 46 }, { 45, 107, 44 }, { 48, 107, 45 }, { 48, 47, 46, 107 }, { 49, 47, 48 }, { 49, 48, 288 }, { 49, 50, 63, 64 }, { 5, 1, 91, 24 }, { 5, 105, 6 }, { 5, 6, 96 }, { 50, 288, 51 }, { 50, 49, 288 }, { 52, 50, 51 }, { 54, 53, 52, 283 }, { 56, 55, 53, 54 }, { 57, 55, 302 }, { 58, 302, 100 }, { 58, 57, 302 }, { 59, 53, 55, 57 }, { 6, 105, 106 }, { 60, 57, 58 }, { 61, 59, 300 }, { 62, 52, 53, 59 }, { 62, 63, 50, 52 }, { 63, 62, 68 }, { 64, 65, 47, 49 }, { 65, 64, 69, 307 }, { 65, 66, 46, 47 }, { 66, 67, 44, 46 }, { 66, 71, 67 }, { 67, 92, 41, 44 }, { 68, 62, 59, 299 }, { 69, 64, 63, 68 }, { 7, 5, 24, 23 }, { 70, 66, 65 }, { 70, 71, 66 }, { 71, 70, 308, 76 }, { 71, 72, 92, 67 }, { 71, 77, 72 }, { 72, 90, 91, 92 }, { 73, 68, 299 }, { 73, 74, 69, 68 }, { 75, 292, 306 }, { 76, 308, 306 }, { 77, 71, 76 }, { 77, 89, 90, 72 }, { 78, 77, 76 }, { 78, 88, 89, 77 }, { 79, 292, 75, 74 }, { 8, 23, 22 }, { 80, 73, 299 }, { 80, 79, 74, 73 }, { 81, 80, 299 }, { 81, 82, 111, 112 }, { 82, 81, 299 }, { 83, 79, 80 }, { 83, 80, 81 }, { 83, 81, 112, 113 }, { 84, 298, 292 }, { 84, 83, 113, 110 }, { 84, 85, 298 }, { 85, 296, 298 }, { 85, 84, 110, 109 }, { 86, 100, 99, 40 }, { 86, 61, 300 }, { 87, 33, 88, 78 }, { 87, 78, 298 }, { 88, 294, 32 }, { 9, 106, 8 }, { 9, 8, 22, 21 }, { 92, 91, 1, 41 }, { 94, 2, 3, 43 }, { 95, 3, 96, 4 }, { 96, 106, 104 }, { 96, 223, 286, 287 }, { 96, 287, 4 }, { 96, 6, 106 }, { 96, 93, 1 }, { 97, 12, 98, 275 }, { 97, 155, 274 }, { 97, 274, 282 }, { 97, 275, 276, 277 }, { 97, 277, 155 }, { 99, 100, 54, 303 }, { 99, 303, 304 }, { 99, 304, 16 } }
    }

    setmetatable(shuttle, Model)

    return shuttle
end

function makecube(x, y, z, side)
    local model = {
        v = {},
        f = { { 1, 2, 4, 3 }, { 5, 6, 8, 7 }, { 1, 5, 7, 3 }, { 2, 6, 8, 4 } },
        speed = {
            --own cube speed. usually 0 except when exploded
            x = rnd(1) - 0.5,
            y = rnd(1) - 0.5,
            z = rnd(1) - 0.5
        },
        x = 0,
        y = 0,
        z = 0,
        update = function(self, parent)
            if parent.exploded then
                self.speed.x = self.speed.x * 1.01
                self.speed.y = self.speed.y + 1.01
                self.speed.z = self.speed.z + 1.01
            end
        end
    }
    setmetatable(model, Model)
    setmetatable(model, Mesh)

    --create vertex map for a cube
    for i = 0, 8 do
        local _x = i % 2 > 0 and x or x + side
        local _y = i % 4 > 1 and y or y + side
        local _z = i % 8 > 3 and z or z + side
        add(model.v, { _x, _y, _z })
    end

    return model
end


function _update60()
    listencontrols()


    if (not conf.pause) then
        if laststats.cpu < conf.maxCpu and #models < conf.maxmodels then
            add(models, maketetromino())
        end

        for model in all(models) do
            model:update()
        end

        camera.p = camera.p + 0.0001
    end
end

function _draw()

    cls()

    _m = sortz(models)
    for model in all(_m) do
        model:draw()
    end

    if conf.debug then
        drawdebug()
    end

    drawmouse()

    laststats.cpu = stat(1)
end

function drawmouse()
    spr(1, stat(32), stat(33))
end

--floor to set amount of deimals
--@param {Float value - number to apply floor to
--@param {Integer} d - amount of decimals to round the value to
function flrd(value, d)
    return flr(value * (10 ^ d)) / (10 ^ d)
end

function pointinsidearea(px, py, points)
    local pointarea = 0;

    for i = 1, #points do
        if (i < #points) then
            local point = { points[i], points[i + 1], { x = px, y = py } }
            pointarea = pointarea + polygonarea(point)
        else
            local point = { points[i], points[1], { x = px, y = py } }
            pointarea = pointarea + polygonarea(point)
        end
    end

    return pointarea <= polygonarea(points)
end

--calculate area of polygon
--@param {Table} points - e.g. {{x,y,z,{x,y,z}}
function polygonarea(points)
    local area = 0

    for i = 1, #points do
        if (i < #points) then
            area = area + (points[i].x * points[i + 1].y - points[i + 1].x * points[1].y)
        else
            area = area + (points[i].x * points[1].y - points[1].x * points[i].y)
        end
    end

    return 0.5 * area
end

function drawdebug()
    print('mousex: ' .. stat(32) .. ' mousey: ' .. stat(33) .. ' click:' .. stat(34), 0, 0, 7)
    --print('lastx:'..laststats.x,0,7,7)
    print('p:' .. camera.p .. ' w:' .. camera.w .. ' r:' .. flrd(camera.r, 2), 0, 104, 7)
    print('x:' .. flrd(camera.x, 2) .. ' y:' .. flrd(camera.y, 2) .. ' z:' .. flrd(camera.z, 2) .. ' f:' .. camera.f, 0, 110, 7)
    print('models:' .. #models, 0, 116, 7)
    print('cpu:' .. flrd(100 * laststats.cpu, 0) .. '% ram:' .. flrd(stat(0), 2), 0, 122, 7)
end

function listencontrols()
    if (btn(0)) then camera.x = camera.x + 0.5 end
    if (btn(1)) then camera.x = camera.x - 0.5 end
    if (btn(2)) then camera.y = camera.y + 0.5 end
    if (btn(3)) then camera.y = camera.y - 0.5 end
    if (btn(4, 0)) then camera.z = camera.z + 0.5 end
    if (btn(5, 0)) then camera.z = camera.z - 0.5 end

    if (btnp(4, 1)) then conf.pause = not conf.pause end
    if (btnp(5, 1)) then conf.debug = not conf.debug end

    if stat(34) == 1 then
        if (laststats.x == -1) then
            laststats.x = stat(32)
            laststats.y = stat(33)
            laststats.p = camera.p
            laststats.w = camera.w
        end

        camera.p = laststats.p + (laststats.x - stat(32)) * 0.01
        camera.w = laststats.w + (laststats.y - stat(33)) * 0.01
    else
        laststats.x = -1
    end
end

--stole sort algo from https://stackoverflow.com/questions/15706270/sort-a-table-in-lua
function sortz(t)

    local sorted = t
    local temp = {}

    for j = 1, #sorted - 1 do
        if t[j].z < sorted[j + 1].z then
            temp = sorted[j + 1]
            sorted[j + 1] = sorted[j]
            sorted[j] = temp
        end
    end

    if (conf.debug) then
        for s = 1, #sorted do
            print('id:' .. sorted[s].id .. ' z:' .. sorted[s].z, 0, 7 * s, sorted[s].colors[1])
        end
    end

    return sorted
end
__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000

__gff__
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__music__
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344